@{
    Layout = null; // ä¸ä½¿ç”¨å¸ƒå±€æ–‡ä»¶
}
<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>é…ç½®ç®¡ç† - SHè®¾å¤‡é…ç½®ç³»ç»Ÿ</title>
    
    <!-- Element Plus CSS -->
@*     <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/element-plus@2.4.4/dist/index.css" /> *@
    <link rel="stylesheet" href="~/lib/element-plus/index.css">
    <!-- JavaScript ä¾èµ– -->
    <script src="~/lib/vue/vue.global.js"></script>
    <script src="~/lib/element-plus/index.full.js"></script>
    <script src="~/lib/element-plus-icons-vue/index.iife.min.js"></script>
    <script src="~/lib/axios/axios.min.js"></script>
    <script src="~/lib/element-plus/locale/zh-cn.min.js"></script>
    <!-- è‡ªå®šä¹‰æ ·å¼ -->
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }
        
        .main-container {
            min-height: 100vh;
            padding: 20px;
        }
        
        .header {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 12px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 8px 32px rgba(31, 38, 135, 0.37);
            border: 1px solid rgba(255, 255, 255, 0.18);
            text-align: center;
        }
        
        .header h1 {
            color: #2c3e50;
            font-size: 32px;
            font-weight: 700;
            margin-bottom: 10px;
        }
        
        .header p {
            color: #718096;
            font-size: 18px;
        }
        
        .navigation-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .nav-card {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 16px;
            padding: 30px;
            box-shadow: 0 8px 32px rgba(31, 38, 135, 0.37);
            border: 1px solid rgba(255, 255, 255, 0.18);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            cursor: pointer;
            text-decoration: none;
            color: inherit;
        }
        
        .nav-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 12px 40px rgba(31, 38, 135, 0.5);
        }
        
        .nav-card-icon {
            font-size: 48px;
            margin-bottom: 20px;
            display: block;
        }
        
        .nav-card h3 {
            color: #2c3e50;
            font-size: 24px;
            font-weight: 600;
            margin-bottom: 15px;
        }
        
        .nav-card p {
            color: #718096;
            font-size: 16px;
            line-height: 1.6;
            margin-bottom: 20px;
        }
        
        .nav-card-features {
            list-style: none;
            padding: 0;
        }
        
        .nav-card-features li {
            color: #4a5568;
            font-size: 14px;
            margin-bottom: 8px;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .nav-card-features li::before {
            content: "âœ“";
            color: #48bb78;
            font-weight: bold;
        }
        
        .status-section {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 12px;
            padding: 30px;
            box-shadow: 0 8px 32px rgba(31, 38, 135, 0.37);
            border: 1px solid rgba(255, 255, 255, 0.18);
        }
        
        .status-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .status-card {
            background: #f8fafc;
            border-radius: 12px;
            padding: 20px;
            border: 1px solid #e2e8f0;
        }
        
        .status-card h4 {
            color: #2d3748;
            font-size: 16px;
            font-weight: 600;
            margin-bottom: 15px;
        }
        
        .footer {
            text-align: center;
            padding: 20px;
            color: rgba(255, 255, 255, 0.8);
            font-size: 14px;
        }
        
        media (max-width: 768px) {
            .main-container {
                padding: 10px;
            }
            
            .header {
                padding: 20px;
            }
            
            .header h1 {
                font-size: 28px;
            }
            
            .navigation-grid {
                grid-template-columns: 1fr;
            }
            
            .nav-card {
                padding: 20px;
            }
        }
    </style>
</head>
<body>
    <div class="main-container">
        <!-- é¡µé¢å¤´éƒ¨ -->
        <div class="header">
            <h1>ğŸ”§ SHè®¾å¤‡é…ç½®ç®¡ç†ç³»ç»Ÿ</h1>
            <p>ç»Ÿä¸€ç®¡ç†PLCé€šä¿¡ä¸è®¾å¤‡ç³»ç»Ÿé…ç½®ï¼Œç¡®ä¿è®¾å¤‡ç¨³å®šè¿è¡Œ</p>
        </div>
        
        <!-- ä¸»è¦å†…å®¹ -->
        <div id="config-overview-app" v-cloak>
            <!-- å¯¼èˆªå¡ç‰‡ -->
            <div class="navigation-grid">
                <!-- PLCé…ç½®å¡ç‰‡ -->
                <a href="/Config/PLCConfig" class="nav-card">
                    <span class="nav-card-icon" style="color: #4299e1;">ğŸ”Œ</span>
                    <h3>PLCé€šä¿¡é…ç½®</h3>
                    <p>é…ç½®PLCè®¾å¤‡çš„è¿æ¥å‚æ•°ã€è¶…æ—¶è®¾ç½®å’Œæ•°æ®å—ç®¡ç†ï¼Œç¡®ä¿ç¨³å®šçš„å·¥ä¸šé€šä¿¡ã€‚</p>
                    <ul class="nav-card-features">
                        <li>åŸºç¡€è¿æ¥å‚æ•°è®¾ç½®</li>
                        <li>è¶…æ—¶å’Œè½®è¯¢é—´éš”é…ç½®</li>
                        <li>æ•°æ®å—åŠ¨æ€ç®¡ç†</li>
                        <li>è¿æ¥çŠ¶æ€å®æ—¶ç›‘æ§</li>
                    </ul>
                </a>

                <!-- è®¾å¤‡é…ç½®å¡ç‰‡ -->
                <a href="/Config/EquipmentConfig" class="nav-card">
                    <span class="nav-card-icon" style="color: #48bb78;">âš™ï¸</span>
                    <h3>è®¾å¤‡ç³»ç»Ÿé…ç½®</h3>
                    <p>ç®¡ç†SECS/GEMåè®®å‚æ•°ã€SVIDæ˜ å°„å’Œè®¾å¤‡è¿è¡Œé…ç½®ï¼Œä¼˜åŒ–è®¾å¤‡æ€§èƒ½ã€‚</p>
                    <ul class="nav-card-features">
                        <li>è®¾å¤‡åŸºæœ¬ä¿¡æ¯ç®¡ç†</li>
                        <li>HSMSç½‘ç»œå‚æ•°è®¾ç½®</li>
                        <li>SVIDçŠ¶æ€å˜é‡æ˜ å°„</li>
                        <li>åˆ†æ­¥éª¤é…ç½®å‘å¯¼</li>
                    </ul>
                </a>

                <!-- ç³»ç»Ÿç›‘æ§å¡ç‰‡ -->
                <div class="nav-card" v-on:click="showMonitorDialog = true">
                    <span class="nav-card-icon" style="color: #ed8936;">ğŸ“Š</span>
                    <h3>ç³»ç»ŸçŠ¶æ€ç›‘æ§</h3>
                    <p>å®æ—¶ç›‘æ§ç³»ç»Ÿè¿è¡ŒçŠ¶æ€ã€è¿æ¥è´¨é‡å’Œæ€§èƒ½æŒ‡æ ‡ï¼ŒåŠæ—¶å‘ç°å¹¶è§£å†³é—®é¢˜ã€‚</p>
                    <ul class="nav-card-features">
                        <li>å®æ—¶è¿æ¥çŠ¶æ€æ˜¾ç¤º</li>
                        <li>é€šä¿¡è´¨é‡ç›‘æ§</li>
                        <li>æ€§èƒ½æŒ‡æ ‡ç»Ÿè®¡</li>
                        <li>å¼‚å¸¸å‘Šè­¦é€šçŸ¥</li>
                    </ul>
                </div>
            </div>

            <!-- ç³»ç»ŸçŠ¶æ€æ¦‚è§ˆ -->
            <div class="status-section">
                <h2 style="color: #2d3748; margin-bottom: 25px; font-size: 24px; font-weight: 600;">
                    ğŸ“ˆ ç³»ç»ŸçŠ¶æ€æ¦‚è§ˆ
                </h2>
                
                <div class="status-grid">
                    <!-- PLCè¿æ¥çŠ¶æ€ -->
                    <div class="status-card">
                        <h4>PLCè¿æ¥çŠ¶æ€</h4>
                        <el-tag 
                            :type="systemStatus.plc.connected ? 'success' : 'danger'" 
                            size="large">
                            {{ systemStatus.plc.connected ? 'å·²è¿æ¥' : 'æœªè¿æ¥' }}
                        </el-tag>
                        <p style="margin-top: 10px; color: #718096; font-size: 14px;">
                            {{ systemStatus.plc.description }}
                        </p>
                        <div style="margin-top: 15px;">
                            <el-button 
                                type="primary" 
                                size="small"
                                       v-on:click="testPLCConnection"
                                :loading="testingPLC">
                                æµ‹è¯•è¿æ¥
                            </el-button>
                        </div>
                    </div>

                    <!-- è®¾å¤‡ç³»ç»ŸçŠ¶æ€ -->
                    <div class="status-card">
                        <h4>è®¾å¤‡ç³»ç»ŸçŠ¶æ€</h4>
                        <el-tag 
                            :type="systemStatus.equipment.active ? 'success' : 'info'" 
                            size="large">
                            {{ systemStatus.equipment.active ? 'è¿è¡Œä¸­' : 'å¾…æœº' }}
                        </el-tag>
                        <p style="margin-top: 10px; color: #718096; font-size: 14px;">
                            {{ systemStatus.equipment.description }}
                        </p>
                        <div style="margin-top: 15px;">
                            <el-button 
                                type="primary" 
                                size="small"
                                       v-on:click="toggleEquipmentStatus"
                                :loading="togglingEquipment">
                                {{ systemStatus.equipment.active ? 'åœæ­¢' : 'å¯åŠ¨' }}
                            </el-button>
                        </div>
                    </div>

                    <!-- é€šä¿¡è´¨é‡ -->
                    <div class="status-card">
                        <h4>é€šä¿¡è´¨é‡</h4>
                        <el-progress 
                            :percentage="systemStatus.communication.quality" 
                            :color="getQualityColor(systemStatus.communication.quality)"
                            :stroke-width="8">
                        </el-progress>
                        <p style="margin-top: 10px; color: #718096; font-size: 14px;">
                            å»¶è¿Ÿ: {{ systemStatus.communication.latency }}ms
                        </p>
                        <p style="color: #718096; font-size: 14px;">
                            ä¸¢åŒ…ç‡: {{ systemStatus.communication.packetLoss }}%
                        </p>
                    </div>

                    <!-- ç³»ç»Ÿæ€§èƒ½ -->
                    <div class="status-card">
                        <h4>ç³»ç»Ÿæ€§èƒ½</h4>
                        <div style="margin-bottom: 10px;">
                            <span style="font-size: 14px; color: #718096;">CPUä½¿ç”¨ç‡</span>
                            <el-progress 
                                :percentage="systemStatus.performance.cpu" 
                                :stroke-width="6"
                                :show-text="false">
                            </el-progress>
                        </div>
                        <div>
                            <span style="font-size: 14px; color: #718096;">å†…å­˜ä½¿ç”¨ç‡</span>
                            <el-progress 
                                :percentage="systemStatus.performance.memory" 
                                :stroke-width="6"
                                :show-text="false">
                            </el-progress>
                        </div>
                    </div>
                </div>

                <!-- æœ€è¿‘æ´»åŠ¨ -->
                <div style="margin-top: 30px;">
                    <h3 style="color: #2d3748; margin-bottom: 20px; font-size: 20px; font-weight: 600;">
                        ğŸ“ æœ€è¿‘æ´»åŠ¨
                    </h3>
                    <el-timeline>
                        <el-timeline-item 
                            v-for="activity in recentActivities" 
                            :key="activity.id"
                            :timestamp="activity.timestamp"
                            :type="activity.type">
                            {{ activity.description }}
                        </el-timeline-item>
                    </el-timeline>
                </div>
            </div>

            <!-- ç³»ç»Ÿç›‘æ§å¯¹è¯æ¡† -->
            <el-dialog
                v-model="showMonitorDialog"
                title="ç³»ç»ŸçŠ¶æ€ç›‘æ§"
                width="80%"
                top="5vh">
                <div style="text-align: center; padding: 40px;">
                    <el-icon size="64" color="#409eff">
                        <Monitor />
                    </el-icon>
                    <h3 style="margin: 20px 0; color: #303133;">ç³»ç»Ÿç›‘æ§åŠŸèƒ½</h3>
                    <p style="color: #909399; margin-bottom: 30px;">
                        è¯¦ç»†çš„ç³»ç»Ÿç›‘æ§åŠŸèƒ½æ­£åœ¨å¼€å‘ä¸­ï¼Œå°†æä¾›å®æ—¶å›¾è¡¨ã€å†å²æ•°æ®åˆ†æå’Œå‘Šè­¦ç®¡ç†ç­‰åŠŸèƒ½ã€‚
                    </p>
                    <el-button type="primary" onclick="showMonitorDialog = false">
                        äº†è§£æ›´å¤š
                    </el-button>
                </div>
            </el-dialog>
        </div>
        
        <!-- é¡µé¢åº•éƒ¨ -->
        <div class="footer">
            Â© 2025 SHè®¾å¤‡é…ç½®ç®¡ç†ç³»ç»Ÿ - ä¸ºå·¥ä¸š4.0æä¾›ç¨³å®šå¯é çš„è®¾å¤‡é…ç½®è§£å†³æ–¹æ¡ˆ
        </div>
    </div>

    <!-- åŠ è½½Vue.jså’ŒElement Plus -->
@*     <script src="https://cdn.jsdelivr.net/npm/vue@3/dist/vue.global.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/element-plus@2.4.4/dist/index.full.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/element-plus@2.4.4/dist/locale/zh-cn.min.js"></script> *@

    <script>
        // æ£€æŸ¥ä¾èµ–åŠ è½½
        if (typeof Vue === 'undefined') {
            alert('Vue.jsåŠ è½½å¤±è´¥ï¼Œè¯·æ£€æŸ¥ç½‘ç»œè¿æ¥');
        } else if (typeof ElementPlus === 'undefined') {
            alert('ElementPlusåŠ è½½å¤±è´¥ï¼Œè¯·æ£€æŸ¥ç½‘ç»œè¿æ¥');
        } else {
            // åˆå§‹åŒ–åº”ç”¨
            const { createApp } = Vue;
            const { ElMessage, ElNotification } = ElementPlus;

            const app = createApp({
                data() {
                    return {
                        showMonitorDialog: false,
                        testingPLC: false,
                        togglingEquipment: false,
                        systemStatus: {
                            plc: {
                                connected: false,
                                description: 'PLCè®¾å¤‡æœªè¿æ¥ï¼Œè¯·æ£€æŸ¥ç½‘ç»œå’Œé…ç½®'
                            },
                            equipment: {
                                active: false,
                                description: 'è®¾å¤‡ç³»ç»Ÿå¤„äºå¾…æœºçŠ¶æ€'
                            },
                            communication: {
                                quality: 85,
                                latency: 25,
                                packetLoss: 0.1
                            },
                            performance: {
                                cpu: 45,
                                memory: 62
                            }
                        },
                        recentActivities: [
                            {
                                id: 1,
                                timestamp: '2024-01-15 14:30:25',
                                type: 'success',
                                description: 'ç³»ç»Ÿå¯åŠ¨å®Œæˆï¼Œæ‰€æœ‰æ¨¡å—æ­£å¸¸åˆå§‹åŒ–'
                            },
                            {
                                id: 2,
                                timestamp: '2024-01-15 14:28:10',
                                type: 'primary',
                                description: 'åŠ è½½PLCé…ç½®æ–‡ä»¶æˆåŠŸ'
                            },
                            {
                                id: 3,
                                timestamp: '2024-01-15 14:25:05',
                                type: 'warning',
                                description: 'PLCè¿æ¥è¶…æ—¶ï¼Œæ­£åœ¨é‡è¯•è¿æ¥'
                            },
                            {
                                id: 4,
                                timestamp: '2024-01-15 14:20:00',
                                type: 'info',
                                description: 'ç”¨æˆ·ç™»å½•ç³»ç»Ÿï¼Œå¼€å§‹é…ç½®ä¼šè¯'
                            }
                        ]
                    }
                },
                methods: {
                    async testPLCConnection() {
                        this.testingPLC = true;
                        try {
                            // æ¨¡æ‹Ÿè¿æ¥æµ‹è¯•
                            await new Promise(resolve => setTimeout(resolve, 2000));
                            
                            // éšæœºæ¨¡æ‹Ÿè¿æ¥ç»“æœ
                            const connected = Math.random() > 0.3;
                            
                            this.systemStatus.plc.connected = connected;
                            this.systemStatus.plc.description = connected 
                                ? 'PLCè®¾å¤‡è¿æ¥æ­£å¸¸ï¼Œé€šä¿¡ç¨³å®š' 
                                : 'PLCè¿æ¥å¤±è´¥ï¼Œè¯·æ£€æŸ¥è®¾å¤‡çŠ¶æ€å’Œç½‘ç»œé…ç½®';
                            
                            // æ·»åŠ æ´»åŠ¨è®°å½•
                            this.recentActivities.unshift({
                                id: Date.now(),
                                timestamp: new Date().toLocaleString(),
                                type: connected ? 'success' : 'danger',
                                description: connected ? 'PLCè¿æ¥æµ‹è¯•æˆåŠŸ' : 'PLCè¿æ¥æµ‹è¯•å¤±è´¥'
                            });
                            
                            ElNotification({
                                title: 'PLCè¿æ¥æµ‹è¯•',
                                message: connected ? 'è¿æ¥æµ‹è¯•æˆåŠŸ' : 'è¿æ¥æµ‹è¯•å¤±è´¥',
                                type: connected ? 'success' : 'error'
                            });
                            
                        } catch (error) {
                            ElMessage.error('è¿æ¥æµ‹è¯•å‡ºç°å¼‚å¸¸: ' + error.message);
                        } finally {
                            this.testingPLC = false;
                        }
                    },
                    
                    async toggleEquipmentStatus() {
                        this.togglingEquipment = true;
                        try {
                            // æ¨¡æ‹ŸçŠ¶æ€åˆ‡æ¢
                            await new Promise(resolve => setTimeout(resolve, 1500));
                            
                            this.systemStatus.equipment.active = !this.systemStatus.equipment.active;
                            this.systemStatus.equipment.description = this.systemStatus.equipment.active
                                ? 'è®¾å¤‡ç³»ç»Ÿè¿è¡Œä¸­ï¼Œå„æ¨¡å—çŠ¶æ€æ­£å¸¸'
                                : 'è®¾å¤‡ç³»ç»Ÿå·²åœæ­¢ï¼Œå¤„äºå¾…æœºçŠ¶æ€';
                            
                            // æ·»åŠ æ´»åŠ¨è®°å½•
                            this.recentActivities.unshift({
                                id: Date.now(),
                                timestamp: new Date().toLocaleString(),
                                type: 'primary',
                                description: this.systemStatus.equipment.active ? 'è®¾å¤‡ç³»ç»Ÿå·²å¯åŠ¨' : 'è®¾å¤‡ç³»ç»Ÿå·²åœæ­¢'
                            });
                            
                            ElMessage.success(
                                this.systemStatus.equipment.active ? 'è®¾å¤‡å¯åŠ¨æˆåŠŸ' : 'è®¾å¤‡åœæ­¢æˆåŠŸ'
                            );
                            
                        } catch (error) {
                            ElMessage.error('æ“ä½œå¤±è´¥: ' + error.message);
                        } finally {
                            this.togglingEquipment = false;
                        }
                    },
                    
                    getQualityColor(quality) {
                        if (quality >= 80) return '#67c23a';
                        if (quality >= 60) return '#e6a23c';
                        return '#f56c6c';
                    }
                },
                
                mounted() {
                    console.log('é…ç½®æ€»è§ˆåº”ç”¨å·²æŒ‚è½½');
                    
                    // æ¨¡æ‹Ÿå®æ—¶æ•°æ®æ›´æ–°
                    setInterval(() => {
                        // æ›´æ–°é€šä¿¡è´¨é‡
                        const baseQuality = 85;
                        this.systemStatus.communication.quality = baseQuality + Math.random() * 10 - 5;
                        
                        // æ›´æ–°å»¶è¿Ÿ
                        this.systemStatus.communication.latency = 25 + Math.random() * 10 - 5;
                        
                        // æ›´æ–°æ€§èƒ½æ•°æ®
                        this.systemStatus.performance.cpu = 45 + Math.random() * 20 - 10;
                        this.systemStatus.performance.memory = 62 + Math.random() * 15 - 7;
                    }, 5000);
                }
            });

            // ä½¿ç”¨Element Pluså’Œä¸­æ–‡è¯­è¨€åŒ…
            app.use(ElementPlus, {
                locale: ElementPlusLocaleZhCn
            });
            
            // æŒ‚è½½åº”ç”¨
            app.mount('#config-overview-app');
        }
    </script>
</body>
</html>